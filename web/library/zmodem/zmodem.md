---
title: zmodem
tags: [zmodem]
date: 2023-05-31 14:00:41
update: 2023-05-31 14:00:55
---
#zmodem 

# zmodem

[ZMODEM](https://zh.wikipedia.org/wiki/ZMODEM) 是一种文件传输协议 。

[协议内容](http://gallium.inria.fr/~doligez/zmodem/zmodem.txt)

## 优势

ZMODEM 的关键改进是引入了滑动窗口支持以**提高性能**。

> 背景：
> 通常，文件传输协议将文件分解为一系列*数据包*，然后一次一个地发送到接收方。 每个数据包都带有*校验和*，可用于确定数据包是否被正确接收。 如果正确接收到分组，则发送ACK消息，然后发送方开始发送下一个分组。
> 
> 但是，通信系统中存在延迟，干扰了这个过程。 即使接收方立即发送ACK ，通信系统中的延迟也意味着在发送方收到确认并发送下一个数据包之前总会有一段时间。 随着调制解调器速度的增加，在延迟期间可发送的包数目越来越大，这降低了信道效率 。

滑动窗口协议通过允许发送机器在不等待ACK的情况下继续处理下一个数据包来避免此问题。 接收方发送ACK （或者如果有错误则发送NAK ）以及它正在确认的分组号。 发送方可以随意处理这些内容，根据需要重新发送数据包。 这有效地消除了没有错误发生时的确认延迟，只留下了数据传输和错误检测的延迟。

**重新启动**是另一个增强，允许在线路被中断或用户时间用完之后重新启动传输。

## 局限性

- 一些ZMODEM数据包（例如 ZACK，ZRPOS）在传输的文件中嵌入一个字节的32位无符号整数，作为偏移量。 此设计限制了ZMODEM**只能可靠地传输大小不超过4GB**的文件。
- 即使协议允许它，引用（l）rzsz实现也不能编码任何非控制字符（例如'〜'），这些字符经常被TCP / IP连接程序（如telnet和ssh）用作客户端“终端转义”字符。 用户**必须禁用终端转义功能才能在这些类型的链接上实现可靠的传输**，例如ssh -e none user@hostname。